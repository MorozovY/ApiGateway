# Epic 4 Retrospective: Approval Workflow

**–î–∞—Ç–∞:** 2026-02-18
**–§–∞—Å–∏–ª–∏—Ç–∞—Ç–æ—Ä:** Bob (Scrum Master)
**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** Alice (PO), Charlie (Senior Dev), Dana (QA), Elena (Junior Dev), Yury (Project Lead)

---

## –°–≤–æ–¥–∫–∞ Epic

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–ò—Å—Ç–æ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ** | 6/6 (100%) |
| **Backend —Ç–µ—Å—Ç—ã** | ~300+ (unit + integration) |
| **Frontend —Ç–µ—Å—Ç—ã** | 132 (–≤–∫–ª—é—á–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ) |
| **FR –∑–∞–∫—Ä—ã—Ç–æ** | FR7, FR8, FR9, FR10, FR11, FR12 |
| **–°—Ç–∞—Ç—É—Å** | Done |

### –î–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏

| –ò—Å—Ç–æ—Ä–∏—è | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| 4.1 | Submit for Approval API | Done |
| 4.2 | Approval & Rejection API | Done |
| 4.3 | Pending Approvals List API | Done |
| 4.4 | Route Status Tracking | Done |
| 4.5 | Submit for Approval UI | Done |
| 4.6 | Pending Approvals UI with Inline Actions | Done |

---

## –ß—Ç–æ –ø–æ—à–ª–æ —Ö–æ—Ä–æ—à–æ

### –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
- –í—Å–µ 6 FR (FR7‚ÄìFR12) –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- State machine Draft ‚Üí Pending ‚Üí Published/Rejected —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Redis Pub/Sub cache invalidation: –º–∞—Ä—à—Ä—É—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –≤ gateway-core –º–µ–Ω–µ–µ —á–µ–º –∑–∞ 5 —Å–µ–∫—É–Ω–¥ (NFR3 ‚úÖ)
- 100% completion rate –±–µ–∑ rollover –∏—Å—Ç–æ—Ä–∏–π

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **ApprovalService –∫–∞–∫ shared —Å–µ—Ä–≤–∏—Å** ‚Äî —Å–æ–∑–¥–∞–Ω –≤ 4.1, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ 4.2, 4.3, 4.4. Action Item #1 –∏–∑ Epic 3 retro –ø—Ä–∏–º–µ–Ω—ë–Ω ‚úÖ
- **ProtectedRoute —Ä–∞—Å—à–∏—Ä–µ–Ω** –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–∞—Å—Å–∏–≤–∞ —Ä–æ–ª–µ–π (`requiredRole?: string | string[]`) ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- **Optional Redis injection** (Story 4.3) ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å integration —Ç–µ—Å—Ç–∞–º–∏ –±–µ–∑ Redis –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **features/approval/** —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π feature –º–æ–¥—É–ª—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

### Code Review –∫–∞–∫ safety net
- –í—Å–µ HIGH severity issues –ø–æ–π–º–∞–Ω—ã –¥–æ merge
- –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ: Redis channel name mismatch (4.2) ‚Äî AC2 –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –±—ã –≤ production
- Partial index case sensitivity (4.1) ‚Äî `'PENDING'` vs `'pending'`

---

## –ü—Ä–æ–±–ª–µ–º—ã –∏ –æ–±—É—á–µ–Ω–∏–µ

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ò—Å—Ç–æ—Ä–∏—è | –ü—Ä–æ–±–ª–µ–º–∞ | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ |
|---------|----------|------------|
| 4.1 | –í–µ—Ä—Å–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏: V3 –≤ –æ–ø–∏—Å–∞–Ω–∏–∏, —Ä–µ–∞–ª—å–Ω–æ V6 | –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ dev notes |
| 4.1 | Partial index: `WHERE status = 'PENDING'` ‚Üí –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: `'pending'` (lowercase) |
| 4.1 | Integration tests –¥–ª—è AC4 –Ω–µ–ø–æ–ª–Ω—ã–µ (1 —Ç–µ—Å—Ç –≤–º–µ—Å—Ç–æ 3) | –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ code review |
| 4.2 | **HIGH: Redis channel `route:cache:invalidate` ‚â† `route-cache-invalidation`** | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ code review |
| 4.2 | RouteDetailResponse –±–µ–∑ approval fields | –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ code review |
| 4.3 | Optional Redis injection ‚Äî pre-existing –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑ 4.2 | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ 4.3 |
| 4.4 | Pre-existing compilation error –≤ UserService.kt | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ø—É—Ç–Ω–æ |
| 4.4 | FK cascade constraint –≤ audit_logs | V5_1__fix_audit_logs_fk_cascade.sql |
| 4.5 | `canEdit` –∏ `canSubmit` ‚Äî –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ code review |
| 4.6 | **HIGH: Double role protection ‚Äî dead code** | –£–¥–∞–ª—ë–Ω –≤ code review |
| 4.6 | **HIGH: –ù–µ–≤–µ—Ä–Ω—ã–π return type** approveRoute/rejectRoute (PendingRoute ‚Üí Route) | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 4.6 | `requiredRole="security"` –≤ App.tsx ‚Äî Admin –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å /approvals | ‚ö†Ô∏è –ù–ï –ü–û–ô–ú–ê–ù —Ç–µ—Å—Ç–∞–º–∏, –Ω–∞–π–¥–µ–Ω Yury –≤ –±—Ä–∞—É–∑–µ—Ä–µ |

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã code review (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è)

1. **Integration tests –Ω–µ–ø–æ–ª–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–¥–∞—á–µ** ‚Äî 4.1 (AC4), 4.2 (Redis AC2), 4.5 (—Ç–µ—Å—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ)
2. **DTO –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** ‚Äî approval fields –ø—Ä–æ–ø—É—Å–∫–∞–ª–∏—Å—å –≤ RouteDetailResponse, RouteWithCreator
3. **Audit log changes content** ‚Äî –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è –≤ unit tests (4.1, 4.2)
4. **–ú—É–ª—å—Ç–∏-—Ä–æ–ª–µ–≤—ã–µ —Ñ–∏—á–∏** ‚Äî —Ä–æ–ª—å admin –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å –≤ —Ç–µ—Å—Ç–∞—Ö –¥–ª—è /approvals

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Ö–æ–¥–∫–∞ (–æ—Ç Yury)

**–ë–∞–≥:** Admin-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/approvals` –≤–∏–¥–∏—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. –í–æ–∑–≤—Ä–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞ (layout –∏—Å—á–µ–∑–∞–µ—Ç, router —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø—É—Å—Ç–æ—Ç—É).

**–†–µ–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ (–Ω–∞–π–¥–µ–Ω–∞ –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏):** `fetchPendingRoutes` –≤ `approvalsApi.ts` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ—Å—å –æ–±—ä–µ–∫—Ç `PagedResponse` –∫–∞–∫ `PendingRoute[]`, —Ö–æ—Ç—è –±—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ items: [...], total, offset, limit }`. Ant Design Table –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –≤–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–∞ ‚Üí runtime error ‚Üí blank page –±–µ–∑ Error Boundary.

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: `data.items` –≤–º–µ—Å—Ç–æ `data` –≤ `approvalsApi.ts`.

**–ü–æ—á–µ–º—É –Ω–µ –ø–æ–π–º–∞–Ω–æ —Ç–µ—Å—Ç–∞–º–∏:** `fetchPendingRoutes` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–æ–∫–∞–Ω –≤ unit —Ç–µ—Å—Ç–∞—Ö ‚Äî `vi.mock('../hooks/useApprovals', ...)`. –†–µ–∞–ª—å–Ω–∞—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è HTTP-–æ—Ç–≤–µ—Ç–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

**–í—ã–≤–æ–¥:** 132 —Ç–µ—Å—Ç–∞ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç 5 –º–∏–Ω—É—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Action Items –∏–∑ Epic 3 Retro

| # | Action Item | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---|-------------|--------|-------------|
| 1 | Shared Elements Audit –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω | ApprovalService shared, features/approval/ –≤—ã–¥–µ–ª–µ–Ω |
| 2 | docs/r2dbc-patterns.md | ‚è≥ –ß–∞—Å—Ç–∏—á–Ω–æ | –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ dev notes, –Ω–æ –Ω–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| 3 | Review Follow-ups –≤ backlog | ‚ùå –ù–µ —Å–¥–µ–ª–∞–Ω | correlationId logging –≤—Å—ë –µ—â—ë –æ—Ç–∫—Ä—ã—Ç |
| 4 | Backlog item –¥–ª—è path —Å —Ç–æ—á–∫–∞–º–∏ | ‚ùå –ù–µ —Å–¥–µ–ª–∞–Ω | |
| 5 | Shared Elements Check –≤ Code Review checklist | ‚ùå –ù–µ —Å–¥–µ–ª–∞–Ω | DTO sync –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–≤—Ç–æ—Ä—è–ª–∏—Å—å |

**–ò—Ç–æ–≥–æ:** 1 –≤—ã–ø–æ–ª–Ω–µ–Ω, 1 –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, 3 –Ω–µ —Å–¥–µ–ª–∞–Ω—ã.

---

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä Epic 5

**Epic 5: Rate Limiting** ‚Äî 5 –∏—Å—Ç–æ—Ä–∏–π (5.1‚Äì5.5)

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Epic 4:
- –ú–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —á–µ—Ä–µ–∑ approve workflow ‚Üí rate limits –º–æ–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –Ω–∞ published routes
- Route Details UI (3.6) —É–∂–µ –∏–º–µ–µ—Ç Rate Limit —Å–µ–∫—Ü–∏—é (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ ID ‚Äî –Ω—É–∂–µ–Ω Epic 5 API)
- ApprovalService –∏ RouteDetailResponse –≥–æ—Ç–æ–≤—ã –∫–∞–∫ foundation

–ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Redis-based token bucket algorithm
- Admin creates policies, Developer assigns to routes
- Gateway (gateway-core) –ø—Ä–∏–º–µ–Ω—è–µ—Ç rate limiting –∫ –∑–∞–ø—Ä–æ—Å–∞–º

**–î–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é 5.6:** E2E Playwright happy path –¥–ª—è Epic 5.

---

## Action Items

### –ë–∞–≥ ‚Äî –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

| # | –î–µ–π—Å—Ç–≤–∏–µ | –í–ª–∞–¥–µ–ª–µ—Ü | –ö—Ä–∏—Ç–µ—Ä–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è |
|---|----------|----------|---------------------|
| 1 | –ò—Å–ø—Ä–∞–≤–∏—Ç—å `requiredRole` –≤ App.tsx: `"security"` ‚Üí `["security", "admin"]` | Dev | Admin —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /approvals |

### –ü—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| # | –î–µ–π—Å—Ç–≤–∏–µ | –í–ª–∞–¥–µ–ª–µ—Ü | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|----------|-----------|
| 2 | –û–±–Ω–æ–≤–∏—Ç—å DoD: –º—É–ª—å—Ç–∏-—Ä–æ–ª–µ–≤—ã–µ —Ñ–∏—á–∏ —Ç—Ä–µ–±—É—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö —Ä–æ–ª–µ–π | SM | HIGH |
| 3 | –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ items –≤ backlog: correlationId logging, description null support | SM | LOW |

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

| # | –î–µ–π—Å—Ç–≤–∏–µ | –í–ª–∞–¥–µ–ª–µ—Ü | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|----------|-----------|
| 4 | correlationId logging –≤ RouteService —á–µ—Ä–µ–∑ MDC + Reactor Context | Dev | LOW ‚Äî backlog |

---

## Preparation Tasks –ø–µ—Ä–µ–¥ Epic 5

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üöÄ PREPARATION SPRINT ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

**P1 (CRITICAL): –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ admin/approvals**
- –§–∞–π–ª: `frontend/admin-ui/src/App.tsx`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ: `requiredRole="security"` ‚Üí `requiredRole={["security", "admin"]}`
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ –¥–æ —Å—Ç–∞—Ä—Ç–∞ Epic 5

**P2 (CRITICAL): Setup Playwright –≤ –ø—Ä–æ–µ–∫—Ç–µ**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Playwright, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∫–∞–∫ foundation –¥–ª—è P3 –∏ –¥–ª—è 5.6

**P3 (CRITICAL): E2E happy path —Ç–µ—Å—Ç—ã –¥–ª—è Epics 1‚Äì4**

–°—Ü–µ–Ω–∞—Ä–∏–∏:

*Epic 1 ‚Äî Gateway Core:*
- Health check endpoint –¥–æ—Å—Ç—É–ø–µ–Ω
- –ó–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ Gateway –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ upstream

*Epic 2 ‚Äî Authentication:*
- Developer –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí –≤–∏–¥–∏—Ç dashboard ‚Üí –ª–æ–≥–∞—É—Ç–∏—Ç—Å—è
- Admin —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

*Epic 3 ‚Äî Route Management:*
- Developer —Å–æ–∑–¥–∞—ë—Ç –º–∞—Ä—à—Ä—É—Ç ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç ‚Üí –∫–ª–æ–Ω–∏—Ä—É–µ—Ç ‚Üí —É–¥–∞–ª—è–µ—Ç

*Epic 4 ‚Äî Approval Workflow (–∫—Ä–∏—Ç–∏—á–Ω–æ):*
- Developer –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí —Å–æ–∑–¥–∞—ë—Ç draft ‚Üí submit ‚Üí –≤–∏–¥–∏—Ç pending —Å—Ç–∞—Ç—É—Å
- Security –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí –≤–∏–¥–∏—Ç pending —Å–ø–∏—Å–æ–∫ ‚Üí approve ‚Üí –º–∞—Ä—à—Ä—É—Ç published
- **Admin –ª–æ–≥–∏–Ω–∏—Ç—Å—è ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /approvals ‚Üí –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫** (–ª–æ–≤–∏—Ç —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –±–∞–≥)

---

## –°–æ–≥–ª–∞—à–µ–Ω–∏–µ: E2E —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

```
üìå –ù–û–í–û–ï –°–û–ì–õ–ê–®–ï–ù–ò–ï (—Å Epic 5):
–ü–æ—Å–ª–µ–¥–Ω—è—è –∏—Å—Ç–æ—Ä–∏—è –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∫–∞ = E2E Playwright happy path —Ç–µ—Å—Ç—ã
```

| –≠–ø–∏–∫ | E2E –∏—Å—Ç–æ—Ä–∏—è |
|------|-------------|
| 1‚Äì4 | –ü–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ Preparation Sprint (P3) |
| 5 | Story 5.6 ‚Äî E2E happy path –¥–ª—è Rate Limiting |
| 6+ | –ü–æ—Å–ª–µ–¥–Ω—è—è –∏—Å—Ç–æ—Ä–∏—è –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∫–∞ |

---

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (–ø–µ—Ä–µ–¥ Epic 5)

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–¥–∞—á–∞ | –£—Å–ª–æ–≤–∏–µ |
|-----------|--------|---------|
| 1 | P1: –ë–∞–≥ fix | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî Admin –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å |
| 2 | P2: Playwright setup | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî foundation –¥–ª—è E2E |
| 3 | P3: E2E –¥–ª—è Epics 1‚Äì4 | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî –∑–∞–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–ª–≥ |
| 4 | Epic 5 —Å—Ç–∞—Ä—Ç | –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ P1 + P2 + P3 |

---

## –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **Unit —Ç–µ—Å—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç E2E** ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –Ω–∞—à—ë–ª –∫—Ä–∏—Ç–∏—á–Ω—ã–π –±–∞–≥ –∑–∞ 5 –º–∏–Ω—É—Ç, –∫–æ—Ç–æ—Ä—ã–π 132 —Ç–µ—Å—Ç–∞ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏
2. **–ú—É–ª—å—Ç–∏-—Ä–æ–ª–µ–≤—ã–µ —Ñ–∏—á–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ä–æ–ª–µ–π** ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ primary role –∏–∑ AC
3. **Action items –∏–∑ —Ä–µ—Ç—Ä–æ –Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å** ‚Äî 3 –∏–∑ 5 Epic 3 –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
4. **Code review –ø–æ–π–º–∞–ª –∫—Ä–∏—Ç–∏—á–Ω—ã–µ issues** ‚Äî Redis channel, partial index, DTO sync; –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç E2E
5. **Playwright –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—è—è –∏—Å—Ç–æ—Ä–∏—è –∫–∞–∂–¥–æ–≥–æ —ç–ø–∏–∫–∞** ‚Äî –Ω–æ–≤–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

---

## –ò—Ç–æ–≥

Epic 4 –¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Å 100% completion rate. State machine approve/reject/publish —Ä–∞–±–æ—Ç–∞–µ—Ç. –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ: **—Ç–µ—Å—Ç–æ–≤—ã–π gap** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ E2E –ø—Ä–∏–≤–µ–ª–æ –∫ –Ω–µ—Ä–∞—Å–∫—Ä—ã—Ç–æ–º—É production –±–∞–≥—É (admin/approvals). –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Playwright –∫–∞–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é —á–∞—Å—Ç—å process going forward.

---

*–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ö–æ–¥–µ Team Retrospective, Party Mode*
*–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: Preparation Sprint (P1 + P2 + P3) ‚Üí Epic 5 —Å—Ç–∞—Ä—Ç*
